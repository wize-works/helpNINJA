/* --- Liquid Glass: Hex-token friendly version --- */

/* Keyframes */
@keyframes sheen {
  0%   { transform: translateX(-150%) rotate(8deg); }
  100% { transform: translateX(150%) rotate(8deg); }
}
@keyframes floaty {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-2px); }
}
@keyframes caustics {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.liquid-glass {
  --lg-blur: 40px;
  --lg-alpha: 0.40;
  --lg-border-alpha: 0.35;
  --lg-glow: 0.18;

  position: relative;
  border-radius: 1.25rem;
  /* padding: 1rem; */
  isolation: isolate;

  backdrop-filter: blur(var(--lg-blur)) saturate(120%);
  -webkit-backdrop-filter: blur(var(--lg-blur)) saturate(120%);

  /* Frosted film using your theme base */
  background:
    linear-gradient(
      135deg,
      /* rgb(from var(--color-base-100) r g b / 0.20) 0%,
      rgb(from var(--color-base-200) r g b / 0.80) 100% */
        rgb(from var(--color-primary-content) r g b / var(--lg-alpha)) 0%,
        rgb(from var(--color-primary-content) r g b / 0.30) 30%,
        rgb(from var(--color-primary-content) r g b / 0.20) 70%,
        rgb(from var(--color-primary-content) r g b / 0.10) 100%
    );
  /* background-color: rgb(from var(--color-primary-content) r g b / var(--lg-alpha)); */

  box-shadow:
    0 0 0 1px rgb(from var(--color-primary-content) r g b / var(--lg-border-alpha)),
    0 8px 24px rgb(from var(--color-primary-content) r g b / var(--lg-glow));

  border: 1px solid rgb(from var(--color-primary-content) r g b / 0.1);
  outline-offset: -2px;
}

/* Wet sheen */
.liquid-glass::before {
  content: "";
  position: absolute; inset: -1px; border-radius: inherit;
  pointer-events: none;
  background:
    linear-gradient(to right,
      transparent 0%,
      rgb(from var(--color-base-300) r g b / 0.12) 15%,
      rgb(from var(--color-base-300) r g b / 0.18) 20%,
      rgb(from var(--color-base-300) r g b / 0.12) 35%,
      transparent 100%
    );
  mix-blend-mode: soft-light;
  filter: blur(20px);
  transform: translateX(-150%) rotate(8deg);
  animation: sheen 5.5s ease-in-out infinite;
  opacity: 0.35;
}

/* Liquid caustics with your brand tokens */
.liquid-glass2::after {
  content: "";
  position: absolute; inset: 0; border-radius: inherit;
  pointer-events: none;
  background:
    radial-gradient(120% 60% at 0% 0%,
      rgb(from var(--color-accent) r g b / 0.14) 0%, transparent 60%),
    radial-gradient(120% 60% at 100% 100%,
      rgb(from var(--color-primary) r g b / 0.12) 0%, transparent 60%),
    radial-gradient(80% 40% at 100% 0%,
      rgb(from var(--color-secondary) r g b / 0.10) 0%, transparent 60%);
  background-size: 200% 200%, 200% 200%, 200% 200%;
  animation: caustics 18s ease-in-out infinite, floaty 8s ease-in-out infinite;
  mix-blend-mode: overlay;
  opacity: 0.35;
}

.liquid-glass.lg-compact { --lg-blur: 10px; padding: 0.75rem; border-radius: 1rem; }
.liquid-glass.lg-bold    { --lg-alpha: 0.22; --lg-border-alpha: 0.5; --lg-glow: 0.26; }

@media (prefers-reduced-motion: reduce) {
  .liquid-glass::before,
  .liquid-glass::after { animation: none !important; }
}

.liquid-glass{
  position: relative;
  isolation: isolate;     /* keeps mix-blend-mode inside this element */
  overflow: hidden;       /* clips ::before/::after to the rounded box */
  z-index: 0;             /* new stacking context */
  border-radius: 1.25rem; /* already there, used for clipping */
}

/* Make sure the highlights sit above the background but under content */
.liquid-glass::before,
.liquid-glass::after{
  z-index: 1;
}

/* Keep your content visible above the sheen */
.liquid-glass > *{
  position: relative;
  z-index: 2;
}

/* Optional: ensure the clip follows the radius perfectly on WebKit */
.liquid-glass{
  -webkit-mask-image: radial-gradient(100% 100% at 50% 50%, #000 99.9%, transparent);
  -webkit-mask-composite: source-over;
  background-clip: padding-box; /* prevents border bleed with blur/alpha */
}